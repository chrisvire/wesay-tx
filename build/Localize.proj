<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<PropertyGroup>
		<RootDir>$(teamcity_build_checkoutDir)</RootDir>
		<PoDir>$(RootDir)\default\po</PoDir>
	</PropertyGroup>

	<Target Name="UpdatePot">
		<!-- Update using mercurial -->
		<Exec Command='hg commit -u "bob" -m "palaso_admin updated deafult/po/WeSay.pot" default/po/WeSay.pot'
			WorkingDirectory="$(RootDir)"/>
		<Exec Command='hg push "$(PushRepo)"'
			WorkingDirectory="$(RootDir)"/>
	</Target>

	<Target Name="UpdatePo" DependsOnTargets="PullFromTransifex">
		<!-- Update using mercurial -->
		<Exec Command='hg commit -u "bob" -m "palaso_admin updated deafult/po/ files" default/po/*.po'
			WorkingDirectory="$(RootDir)"/>
		<Exec Command='hg push "$(PushRepo)"'
			WorkingDirectory="$(RootDir)"/>
	</Target>

	<ItemGroup>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/id/file/">
			<Destination>wesay.id.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/fr/file/">
			<Destination>wesay.fr.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/hi/file/">
			<Destination>wesay.hi.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/th/file/">
			<Destination>wesay.th.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/es/file/">
			<Destination>wesay.es.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/lo/file/">
			<Destination>wesay.lo.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/my/file/">
			<Destination>wesay.my.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/ru/file/">
			<Destination>wesay.ru.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/vi/file/">
			<Destination>wesay.vi.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/zh_CN/file/">
			<Destination>wesay.zh_CN.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/km/file/">
			<Destination>wesay.km.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/az/file/">
			<Destination>wesay.az.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/rw/file/">
			<Destination>wesay.rw.po</Destination>
		</URL>
		<URL Include = "http://$(TransifexCredentials)@www.transifex.net/api/project/wesay/resource/wesay-dev/zh_TW/file/">
			<Destination>wesay.zh_TW.po</Destination>
		</URL>
	</ItemGroup>

	<Target Name="PullFromTransifex">
		<Exec Command="wget -O$(PoDir)\%(Destination) @(URL)" WorkingDirectory="." />
		<!--<WebDownload FileUri="@(URL)" FileName="%(Destination)" />-->
	</Target>
</Project>
